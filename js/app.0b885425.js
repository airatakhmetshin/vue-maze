(function(t){function e(e){for(var i,n,o=e[0],c=e[1],l=e[2],d=0,f=[];d<o.length;d++)n=o[d],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&f.push(s[n][0]),s[n]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(f.length)f.shift()();return a.push.apply(a,l||[]),r()}function r(){for(var t,e=0;e<a.length;e++){for(var r=a[e],i=!0,o=1;o<r.length;o++){var c=r[o];0!==s[c]&&(i=!1)}i&&(a.splice(e--,1),t=n(n.s=r[0]))}return t}var i={},s={app:0},a=[];function n(e){if(i[e])return i[e].exports;var r=i[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=i,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/vue-maze/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;a.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"0c0b":function(t,e,r){"use strict";r("f363")},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var i=r("2b0e"),s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("MazeGrid")],1)},a=[],n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"d-flex"},[r("div",{staticClass:"main-container"},[r("div",{staticClass:"grid-wrapper"},[t.$store.getters.isPlayerDead?r("StartGameModal"):t._e(),t.$store.state.pause.isPaused?r("PauseModal"):t._e(),t._l(t.grid,(function(e){return r("div",{staticClass:"d-flex"},t._l(e,(function(e){return r("div",{staticClass:"cell",class:{"cell-block":e.type===t.CELL_TYPES.block,"cell-player":e.type===t.CELL_TYPES.player}},[e.type===t.CELL_TYPES.block?r("div",{staticClass:"cell-icon icon-brick"}):t._e(),e.type===t.CELL_TYPES.player?r("div",{staticClass:"cell-emoji"},[t._v(t._s(t.playerIcon))]):t._e(),e.type===t.CELL_TYPES.strawberry?r("div",{staticClass:"cell-emoji"},[t._v("🍓")]):t._e(),e.type===t.CELL_TYPES.finish?r("div",{staticClass:"cell-emoji"},[t._v("🏁")]):t._e()])})),0)}))],2)]),r("div",[r("Sidebar",{on:{changeGridSize:t.updateGridSize}})],1)])},o=[],c=r("2909"),l=r("5530"),u=(r("159b"),r("0481"),r("4de4"),{data:function(){return{ICONS:["🐶","🐱","🐭","🐨","🐵","🐸"],CELL_TYPES:{block:"block",player:"player",strawberry:"strawberry",finish:"finish"},POINTS_FOR_FINISH:10,POINTS_FOR_STRAWBERRY:2,PLAYER_START:{x:1,y:1},GRID_SIZE_OPTIONS:{"11x11":{x:11,y:11,time:10},"15x15":{x:15,y:15,time:20},"21x21":{x:21,y:21,time:30}}}}}),d=u,f=(r("fb6a"),{methods:{maze:function(t,e){var r,i=(t-1)/2,s=(e-1)/2,a=i*s-1;if(!(a<0)){var n=[];for(r=0;r<i+1;r+=1)n[r]=[];var o=[];for(r=0;r<i+1;r+=1)o[r]=[];var c=[Math.floor(Math.random()*i),Math.floor(Math.random()*s)],l=[c],u=[];for(r=0;r<i+2;r+=1){u[r]=[];for(var d=0;d<s+1;d+=1)u[r].push(r>0&&r<i+1&&d>0&&(r!==c[0]+1||d!==c[1]+1))}while(a>0){var f=[[c[0]+1,c[1]],[c[0],c[1]+1],[c[0]-1,c[1]],[c[0],c[1]-1]],h=[];for(r=0;r<4;r+=1)u[f[r][0]+1][f[r][1]+1]&&h.push(f[r]);if(h.length){a-=1;var p=h[Math.floor(Math.random()*h.length)];u[p[0]+1][p[1]+1]=!1,p[0]===c[0]?n[p[0]][(p[1]+c[1]-1)/2]=!0:o[(p[0]+c[0]-1)/2][p[1]]=!0,l.push(c=p)}else c=l.pop()}return{x:i,y:s,horiz:n,verti:o}}alert("illegal maze dimensions")},display:function(t){for(var e=[],r=0;r<2*t.x+1;r+=1){var i=[];if(r%2===0)for(var s=0;s<2*t.y+1;s+=1)s%2===0?i.push({type:"block",x:s,y:r}):r>0&&t.verti[r/2-1][Math.floor(s/2)]?i.push({type:null,x:s,y:r}):i.push({type:"block",x:s,y:r});else for(var a=0;a<2*t.y+1;a+=1)a%2===0?a>0&&t.horiz[(r-1)/2][a/2-1]?i.push({type:null,x:a,y:r}):i.push({type:"block",x:a,y:r}):i.push({type:null,x:a,y:r});2*t.x-1===r&&(i[2*t.y]={type:"finish",x:2*t.y,y:r}),e.push(i)}return e.slice().reverse()}}}),h=f,p=(r("caad"),r("2532"),r("a434"),{mixins:[d],methods:{getStrawberries:function(t,e){var r=this,i=t.flat().filter((function(t){return![r.CELL_TYPES.block,r.CELL_TYPES.player,r.CELL_TYPES.finish].includes(t.type)&&(t.x!==r.PLAYER_START.x||t.y!==r.PLAYER_START.y)})),s=0;switch(e){case 11:s=3;break;case 15:s=5;break;case 21:s=7;break;default:}for(var a=[],n=0;n<s;n+=1)a.push(i.splice(Math.floor(Math.random()*i.length),1)[0]);return a}}}),m=p,y={methods:{startTimer:function(){var t=this;this.interval=setInterval((function(){t.$store.getters.isPlayerDead?t.stopTimer():(t.$store.dispatch("D_TIMER"),0===t.$store.state.timer.timer&&t.setPlayerNotAlive())}),1e3)},stopTimer:function(){clearInterval(this.interval)},setPlayerNotAlive:function(){this.updateGridSize(),this.stopTimer()}},mounted:function(){var t=this;this.unsubscribe=this.$store.subscribe((function(e){switch(e.type){case"SUSPEND":t.stopTimer();break;case"RESUME":t.startTimer();break;default:}}))},beforeDestroy:function(){this.unsubscribe()}},v=y,S=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"d-flex flex-column h-100 px-4"},[r("div",{staticClass:"pb-4"},[r("h3",[t._v("Settings ⚙️")]),r("div",{staticClass:"row pb-1"},[r("label",{staticClass:"col-auto d-flex align-items-center",attrs:{for:"gridSizeInput"}},[t._v("Grid size:")]),r("div",{staticClass:"col"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.settings.gridSizeSelected,expression:"settings.gridSizeSelected"}],staticClass:"form-select",attrs:{id:"gridSizeInput"},on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.settings,"gridSizeSelected",e.target.multiple?r:r[0])},function(e){return t.changeGridSize()}]}},t._l(t.GRID_SIZE_OPTIONS,(function(e,i){return r("option",{domProps:{value:i}},[t._v(" "+t._s(i)+" ")])})),0)])]),r("div",{staticClass:"row"},[r("label",{staticClass:"col-auto d-flex align-items-center"},[t._v("Reset score:")]),r("div",{staticClass:"col"},[r("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return t.$store.dispatch("RESET_SCORE")}}},[t._v(" RESET ")])])])]),r("div",{staticClass:"pb-4"},[r("h3",[t._v("Time ⏱")]),r("h2",[t._v(t._s(t.$store.state.timer.timer))])]),r("div",{staticClass:"pb-4"},[r("h3",[t._v("Score 🎯")]),r("h2",[t._v(t._s(t.$store.state.score.score))])]),t._m(0),t._m(1)])},_=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"pb-4"},[r("h3",[t._v("Control ⌨")]),r("h3",[t._v("️⬆️"),r("br"),t._v("⬅️ ⬇️️ ➡️")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"pb-4 mt-auto d-flex justify-content-center"},[r("a",{staticClass:"github-link",attrs:{href:"https://github.com/airatakhmetshin/vue-maze",target:"_blank"}})])}],E={name:"Sidebar",mixins:[d],data:function(){return{settings:{gridSizeSelected:"11x11"}}},methods:{changeGridSize:function(){this.$emit("changeGridSize",this.settings.gridSizeSelected)}},mounted:function(){this.changeGridSize()}},b=E,g=(r("0c0b"),r("2877")),P=Object(g["a"])(b,S,_,!1,null,"d488cbca",null),T=P.exports,x=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},R=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"custom-modals start-modal"},[r("h2",[t._v("Press space to START")])])}],C={},O=Object(g["a"])(C,x,R,!1,null,null,null),L=O.exports,M=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},I=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"custom-modals pause-modal"},[r("h1",[t._v("PAUSE")]),r("h4",[t._v("(press space)")])])}],k={},w=Object(g["a"])(k,M,I,!1,null,null,null),A=w.exports,Y={name:"MazeGrid",mixins:[d,h,m,v],components:{Sidebar:T,StartGameModal:L,PauseModal:A},data:function(){return{grid:[],gridXMax:0,gridXMin:0,gridYMax:0,gridYMin:0,player:null,playerIcon:null,currentGridSize:{}}},methods:{renderGrid:function(){var t=this,e=this.display(this.maze(this.gridXMax,this.gridYMax)),r=this.getStrawberries(e,this.gridXMax);e.flat().forEach((function(e){r.forEach((function(r){e.x===r.x&&e.y===r.y&&(e.type=t.CELL_TYPES.strawberry)}))})),this.grid=e},renderPlayer:function(){var t=this;this.grid.flat().filter((function(e){return e.type!==t.CELL_TYPES.block})).forEach((function(e){e.x===t.player.x&&e.y===t.player.y?e.type=t.CELL_TYPES.player:e.type===t.CELL_TYPES.player&&(e.type=null)}))},beforeMoveHook:function(){var t=this;this.grid.flat().filter((function(e){return e.type!==t.CELL_TYPES.block})).filter((function(e){return e.x===t.player.x&&e.y===t.player.y})).forEach((function(e){switch(e.type){case t.CELL_TYPES.finish:t.$store.dispatch("ADD_POINTS",t.POINTS_FOR_FINISH),t.updateGridSize();break;case t.CELL_TYPES.strawberry:t.$store.dispatch("ADD_POINTS",t.POINTS_FOR_STRAWBERRY);break;default:}}))},isBlock:function(t,e){var r=this;return this.grid.flat().some((function(i){return i.x===t&&i.y===e&&i.type===r.CELL_TYPES.block}))},updateGridSize:function(t){t&&(this.currentGridSize=this.GRID_SIZE_OPTIONS[t]),this.gridXMax=this.currentGridSize.x,this.gridYMax=this.currentGridSize.y,this.stopTimer(),this.$store.commit("SET_PLAYER_ALIVE",!1),this.$store.commit("SET_TIMER",this.currentGridSize.time),this.renderGrid(),this.resetPlayer()},resetPlayer:function(){this.player=Object(l["a"])({},this.PLAYER_START),this.renderPlayer()},randomPlayerIcon:function(){return Object(c["a"])(this.ICONS).sort((function(){return.5-Math.random()}))[0]},move:function(t){var e=this.player.x,r=this.player.y;"up"===t&&this.player.y<this.gridYMax&&(r+=1),"down"===t&&this.player.y>this.gridYMin&&(r-=1),"left"===t&&this.player.x>this.gridXMin-1&&(e-=1),"right"===t&&this.player.x<this.gridXMax-1&&(e+=1),this.isBlock(e,r)||(this.player.x=e,this.player.y=r)},keyboardHandler:function(t){var e=this,r=function(t){if(!e.$store.getters.isPlayerDead&&!e.$store.state.pause.isPaused)switch(t){case"ArrowUp":e.move("up");break;case"ArrowDown":e.move("down");break;case"ArrowLeft":e.move("left");break;case"ArrowRight":e.move("right");break;default:}};switch(t.code){case"Space":this.$store.state.isPlayerAlive?this.$store.dispatch("SUSPEND_OR_RESUME"):this.$store.state.timer.timer>0&&(this.$store.commit("SET_PLAYER_ALIVE",!0),this.startTimer());break;default:r(t.code)}}},watch:{player:{handler:function(){this.beforeMoveHook(),this.renderPlayer()},deep:!0}},mounted:function(){this.player=Object(l["a"])({},this.PLAYER_START),this.playerIcon=this.randomPlayerIcon()},created:function(){var t=this;document.addEventListener("keydown",(function(e){return t.keyboardHandler(e)}))}},z=Y,$=Object(g["a"])(z,n,o,!1,null,null,null),G=$.exports,N={name:"App",components:{MazeGrid:G},mounted:function(){this.$store.dispatch("RESTORE_SCORE")}},D=N,j=(r("5c0b"),Object(g["a"])(D,s,a,!1,null,null,null)),U=j.exports,X=r("2f62"),F={state:function(){return{isPaused:!1}},getters:{isNotPaused:function(t){return!t.isPaused}},mutations:{SUSPEND:function(t){t.isPaused=!0},RESUME:function(t){t.isPaused=!1}},actions:{SUSPEND_OR_RESUME:function(t){var e=t.commit,r=t.state;r.isPaused?e("RESUME"):e("SUSPEND")}}},H=(r("a9e3"),{state:function(){return{score:0}},mutations:{SET_SCORE:function(t,e){t.score=Number(e)}},actions:{RESTORE_SCORE:function(t){var e=t.commit;localStorage.getItem("score")&&e("SET_SCORE",localStorage.getItem("score"))},RESET_SCORE:function(t){var e=t.commit;e("SET_SCORE",0),localStorage.removeItem("score")},ADD_POINTS:function(t,e){var r=t.commit,i=t.state,s=i.score;r("SET_SCORE",s+=e),localStorage.setItem("score",i.score)}}}),B={state:function(){return{timer:0}},mutations:{SET_TIMER:function(t,e){t.timer=Number(e)}},actions:{D_TIMER:function(t){var e=t.commit,r=t.state,i=r.timer;e("SET_TIMER",i-=1)}}};i["a"].use(X["a"]);var V=new X["a"].Store({strict:!1,state:{isPlayerAlive:!1},getters:{isPlayerDead:function(t){return!t.isPlayerAlive}},mutations:{SET_PLAYER_ALIVE:function(t,e){t.isPlayerAlive=e}},actions:{},modules:{pause:F,score:H,timer:B}});i["a"].config.productionTip=!1,new i["a"]({store:V,render:function(t){return t(U)}}).$mount("#app")},"5c0b":function(t,e,r){"use strict";r("9c0c")},"9c0c":function(t,e,r){},f363:function(t,e,r){}});
//# sourceMappingURL=app.0b885425.js.map