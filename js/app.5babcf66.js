(function(e){function t(t){for(var i,s,o=t[0],c=t[1],l=t[2],d=0,f=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&f.push(a[s][0]),a[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);u&&u(t);while(f.length)f.shift()();return n.push.apply(n,l||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],i=!0,o=1;o<r.length;o++){var c=r[o];0!==a[c]&&(i=!1)}i&&(n.splice(t--,1),e=s(s.s=r[0]))}return e}var i={},a={app:0},n=[];function s(t){if(i[t])return i[t].exports;var r=i[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=i,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(r,i,function(t){return e[t]}.bind(null,i));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/vue-maze/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;n.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var i=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("MazeGrid")],1)},n=[],s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"d-flex"},[r("div",{staticClass:"grid-wrapper"},e._l(e.grid,(function(t){return r("div",{staticClass:"d-flex"},e._l(t,(function(t){return r("div",{staticClass:"cell",class:{"cell-block":t.type===e.CELL_TYPES.block,"cell-player":t.type===e.CELL_TYPES.player}},[t.type===e.CELL_TYPES.block?r("div",{staticClass:"cell-icon icon-brick"}):e._e(),t.type===e.CELL_TYPES.player?r("div",{staticClass:"cell-emoji"},[e._v(e._s(e.playerIcon))]):e._e(),t.type===e.CELL_TYPES.strawberry?r("div",{staticClass:"cell-emoji"},[e._v("🍓")]):e._e(),t.type===e.CELL_TYPES.finish?r("div",{staticClass:"cell-emoji"},[e._v("🏁")]):e._e()])})),0)})),0),r("div",[r("Sidebar",{on:{changeGridSize:e.updateGridSize}})],1)])},o=[],c=r("2909"),l=r("5530"),u=(r("159b"),r("0481"),r("4de4"),{data:function(){return{ICONS:["🐶","🐱","🐭","🐨","🐵","🐸"],CELL_TYPES:{block:"block",player:"player",strawberry:"strawberry",finish:"finish"},POINTS_FOR_FINISH:10,POINTS_FOR_STRAWBERRY:2,PLAYER_START:{x:1,y:1}}}}),d=u,f=(r("fb6a"),{methods:{maze:function(e,t){var r,i=(e-1)/2,a=(t-1)/2,n=i*a-1;if(!(n<0)){var s=[];for(r=0;r<i+1;r+=1)s[r]=[];var o=[];for(r=0;r<i+1;r+=1)o[r]=[];var c=[Math.floor(Math.random()*i),Math.floor(Math.random()*a)],l=[c],u=[];for(r=0;r<i+2;r+=1){u[r]=[];for(var d=0;d<a+1;d+=1)u[r].push(r>0&&r<i+1&&d>0&&(r!==c[0]+1||d!==c[1]+1))}while(n>0){var f=[[c[0]+1,c[1]],[c[0],c[1]+1],[c[0]-1,c[1]],[c[0],c[1]-1]],p=[];for(r=0;r<4;r+=1)u[f[r][0]+1][f[r][1]+1]&&p.push(f[r]);if(p.length){n-=1;var h=p[Math.floor(Math.random()*p.length)];u[h[0]+1][h[1]+1]=!1,h[0]===c[0]?s[h[0]][(h[1]+c[1]-1)/2]=!0:o[(h[0]+c[0]-1)/2][h[1]]=!0,l.push(c=h)}else c=l.pop()}return{x:i,y:a,horiz:s,verti:o}}alert("illegal maze dimensions")},display:function(e){for(var t=[],r=0;r<2*e.x+1;r+=1){var i=[];if(r%2===0)for(var a=0;a<2*e.y+1;a+=1)a%2===0?i.push({type:"block",x:a,y:r}):r>0&&e.verti[r/2-1][Math.floor(a/2)]?i.push({type:null,x:a,y:r}):i.push({type:"block",x:a,y:r});else for(var n=0;n<2*e.y+1;n+=1)n%2===0?n>0&&e.horiz[(r-1)/2][n/2-1]?i.push({type:null,x:n,y:r}):i.push({type:"block",x:n,y:r}):i.push({type:null,x:n,y:r});2*e.x-1===r&&(i[2*e.y]={type:"finish",x:2*e.y,y:r}),t.push(i)}return t.slice().reverse()}}}),p=f,h=(r("caad"),r("2532"),r("a434"),{mixins:[d],methods:{getStrawberries:function(e,t){var r=this,i=e.flat().filter((function(e){return![r.CELL_TYPES.block,r.CELL_TYPES.player,r.CELL_TYPES.finish].includes(e.type)&&(e.x!==r.PLAYER_START.x||e.y!==r.PLAYER_START.y)})),a=0;switch(t){case 11:a=3;break;case 15:a=5;break;case 21:a=7;break;default:}for(var n=[],s=0;s<a;s+=1)n.push(i.splice(Math.floor(Math.random()*i.length),1)[0]);return n}}}),y=h,v=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"d-flex flex-column h-100 px-4"},[r("div",{staticClass:"pb-4"},[r("h3",[e._v("Settings ⚙️")]),r("div",{staticClass:"row pb-1"},[r("label",{staticClass:"col-auto d-flex align-items-center",attrs:{for:"gridSizeInput"}},[e._v("Grid size:")]),r("div",{staticClass:"col"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.settings.gridSizeSelected,expression:"settings.gridSizeSelected"}],staticClass:"form-select",attrs:{id:"gridSizeInput"},on:{change:[function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.settings,"gridSizeSelected",t.target.multiple?r:r[0])},function(t){return e.changeGridSize()}]}},e._l(e.settings.gridSizeOptions,(function(t){return r("option",{domProps:{value:t}},[e._v(" "+e._s(t)+" ")])})),0)])]),r("div",{staticClass:"row"},[r("label",{staticClass:"col-auto d-flex align-items-center"},[e._v("Reset score:")]),r("div",{staticClass:"col"},[r("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(t){return e.$store.dispatch("RESET_SCORE")}}},[e._v(" RESET ")])])])]),r("div",{staticClass:"pb-4"},[r("h3",[e._v("Score 🎯")]),r("h2",[e._v(e._s(this.$store.state.score))])]),e._m(0),e._m(1)])},S=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"pb-4"},[r("h3",[e._v("Control ⌨")]),r("h3",[e._v("️⬆️"),r("br"),e._v("⬅️ ⬇️️ ➡️")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"pb-4 mt-auto d-flex justify-content-center"},[r("a",{staticClass:"github-link",attrs:{href:"https://github.com/airatakhmetshin/vue-maze",target:"_blank"}})])}],_=r("3835"),b=(r("1276"),r("ac1f"),r("a9e3"),{name:"Sidebar",data:function(){return{settings:{gridSizeSelected:"11x11",gridSizeOptions:["11x11","15x15","21x21"]}}},methods:{changeGridSize:function(){var e=this.settings.gridSizeSelected.split("x"),t=Object(_["a"])(e,2),r=t[0],i=t[1];r=Number(r),i=Number(i),this.$emit("changeGridSize",{XMax:r,YMax:i})}},mounted:function(){this.changeGridSize()}}),m=b,g=(r("646c"),r("2877")),E=Object(g["a"])(m,v,S,!1,null,"70c6ec73",null),x=E.exports,C={name:"MazeGrid",mixins:[d,p,y],components:{Sidebar:x},data:function(){return{grid:[],gridXMax:0,gridXMin:0,gridYMax:0,gridYMin:0,player:null,playerIcon:null}},methods:{renderGrid:function(){var e=this,t=this.display(this.maze(this.gridXMax,this.gridYMax)),r=this.getStrawberries(t,this.gridXMax);t.flat().forEach((function(t){r.forEach((function(r){t.x===r.x&&t.y===r.y&&(t.type=e.CELL_TYPES.strawberry)}))})),this.grid=t},renderPlayer:function(){var e=this;this.grid.flat().filter((function(t){return t.type!==e.CELL_TYPES.block})).forEach((function(t){t.x===e.player.x&&t.y===e.player.y?t.type=e.CELL_TYPES.player:t.type===e.CELL_TYPES.player&&(t.type=null)}))},beforeMoveHook:function(){var e=this;this.grid.flat().filter((function(t){return t.type!==e.CELL_TYPES.block})).filter((function(t){return t.x===e.player.x&&t.y===e.player.y})).forEach((function(t){switch(t.type){case e.CELL_TYPES.finish:e.$store.dispatch("ADD_POINTS",e.POINTS_FOR_FINISH),e.renderGrid(),e.resetPlayer();break;case e.CELL_TYPES.strawberry:e.$store.dispatch("ADD_POINTS",e.POINTS_FOR_STRAWBERRY);break;default:}}))},isBlock:function(e,t){var r=this;return this.grid.flat().some((function(i){return i.x===e&&i.y===t&&i.type===r.CELL_TYPES.block}))},updateGridSize:function(e){this.gridXMax=e.XMax,this.gridYMax=e.YMax,this.renderGrid(),this.resetPlayer()},resetPlayer:function(){this.player=Object(l["a"])({},this.PLAYER_START),this.renderPlayer()},randomPlayerIcon:function(){return Object(c["a"])(this.ICONS).sort((function(){return.5-Math.random()}))[0]},move:function(e){var t=this.player.x,r=this.player.y;"up"===e&&this.player.y<this.gridYMax&&(r+=1),"down"===e&&this.player.y>this.gridYMin&&(r-=1),"left"===e&&this.player.x>this.gridXMin-1&&(t-=1),"right"===e&&this.player.x<this.gridXMax-1&&(t+=1),this.isBlock(t,r)||(this.player.x=t,this.player.y=r)}},watch:{player:{handler:function(){this.beforeMoveHook(),this.renderPlayer()},deep:!0}},mounted:function(){this.player=Object(l["a"])({},this.PLAYER_START),this.playerIcon=this.randomPlayerIcon()},created:function(){var e=this;document.addEventListener("keydown",(function(t){switch(t.code){case"ArrowUp":e.move("up");break;case"ArrowDown":e.move("down");break;case"ArrowLeft":e.move("left");break;case"ArrowRight":e.move("right");break;default:}}))}},T=C,P=Object(g["a"])(T,s,o,!1,null,null,null),L=P.exports,O={name:"App",components:{MazeGrid:L},mounted:function(){this.$store.dispatch("RESTORE_SCORE")}},R=O,w=(r("5c0b"),Object(g["a"])(R,a,n,!1,null,null,null)),M=w.exports,k=r("2f62");i["a"].use(k["a"]);var Y=new k["a"].Store({strict:!1,state:{score:0},mutations:{SET_SCORE:function(e,t){e.score=Number(t)}},actions:{RESTORE_SCORE:function(e){var t=e.commit;localStorage.getItem("score")&&t("SET_SCORE",localStorage.getItem("score"))},RESET_SCORE:function(e){var t=e.commit;t("SET_SCORE",0),localStorage.removeItem("score")},ADD_POINTS:function(e,t){var r=e.commit,i=e.state,a=i.score;r("SET_SCORE",a+=t),localStorage.setItem("score",i.score)}},modules:{}});i["a"].config.productionTip=!1,new i["a"]({store:Y,render:function(e){return e(M)}}).$mount("#app")},"5c0b":function(e,t,r){"use strict";r("9c0c")},"646c":function(e,t,r){"use strict";r("9aa5")},"9aa5":function(e,t,r){},"9c0c":function(e,t,r){}});
//# sourceMappingURL=app.5babcf66.js.map